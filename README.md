# 照片水印工具

一个功能强大的照片批量水印添加工具，支持文本水印和图片水印，提供实时预览和批量导出功能。

## 功能特性

### 📁 文件处理
- **多种导入方式**：支持单张图片拖拽、文件选择器导入、批量导入和整个文件夹导入
- **格式支持**：输入支持 JPEG、PNG、BMP、TIFF 格式，PNG 支持透明通道
- **灵活导出**：可选择输出为 JPEG 或 PNG，支持质量调节和尺寸调整
- **智能命名**：自动添加前缀或后缀，防止覆盖原文件

### 🔤 文本水印
- **自定义文本**：支持任意文本内容
- **丰富样式**：可选择系统字体、调整字号、设置粗体和斜体
- **颜色控制**：支持字体颜色和透明度调节
- **特效增强**：可添加描边和阴影效果，增强复杂背景下的可读性

### 🖼️ 图片水印
- **透明支持**：完美支持带透明通道的 PNG 图片
- **灵活缩放**：可按比例或自由调整水印大小
- **透明度控制**：可调节整体透明度

### 🎯 布局与定位
- **实时预览**：所有调整都在主预览窗口中实时显示
- **九宫格定位**：提供四角和正中心的快速定位
- **自由拖拽**：可直接在预览图上拖拽水印到任意位置
- **任意旋转**：支持 0-360 度任意角度旋转

### 💾 配置管理
- **水印模板**：可保存和加载水印设置模板
- **参数记忆**：自动保存上次使用的设置

## 系统要求

- macOS 10.13 或更高版本
- Python 3.8+ （如果从源码运行）

## 安装使用

### 方式一：下载预编译应用（推荐）

1. 从 [Releases](../../releases) 页面下载最新版本的 `.dmg` 文件
2. 双击 `.dmg` 文件挂载磁盘映像
3. 将 `照片水印工具.app` 拖拽到 `Applications` 文件夹
4. 在 Launchpad 或 Applications 文件夹中找到并运行应用

**注意**：首次运行可能会遇到安全提示，请按以下步骤解决：
- 方法一：在 `系统偏好设置` > `安全性与隐私` > `通用` 中点击"仍要打开"
- 方法二：在终端中运行：`xattr -cr /Applications/照片水印工具.app`

### 方式二：从源码运行

1. 克隆仓库：
   ```bash
   git clone <repository-url>
   cd Photo-Watermark
   ```

2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```

3. 运行应用：
   ```bash
   python app.py
   ```

### 方式三：自行构建应用

1. 克隆仓库并安装依赖（同上）

2. 运行构建脚本：
   ```bash
   chmod +x build.sh
   ./build.sh
   ```

3. 构建完成后，应用程序将位于 `dist/照片水印工具.app`

## 使用说明

### 基本流程

1. **导入图片**：
   - 点击"导入图片"选择单张或多张图片
   - 点击"导入文件夹"批量导入整个文件夹
   - 或直接拖拽图片到左侧列表

2. **设置水印**：
   - 在"文本水印"标签页设置文字内容、字体、颜色等
   - 在"图片水印"标签页选择水印图片并调整大小
   - 在预览区域拖拽调整水印位置
   - 使用旋转滑块调整水印角度

3. **批量导出**：
   - 切换到"布局与导出"标签页
   - 点击"批量导出"选择输出文件夹和格式
   - 设置文件命名规则和质量参数

### 高级功能

- **模板管理**：保存常用的水印设置为模板，方便重复使用
- **实时预览**：所有调整都会在预览窗口中实时显示效果
- **位置记忆**：拖拽调整位置后，其他设置不会影响水印位置
- **透明度控制**：支持对整个水印（包括描边和阴影）应用透明度

## 技术架构

- **界面框架**：PyQt6
- **图像处理**：Pillow (PIL)
- **字体渲染**：支持系统字体，包括 .ttc 字体集合
- **配置管理**：JSON 格式的模板和设置存储

## 开发说明

项目采用模块化设计：

- `app.py`：主应用程序和 GUI 界面
- `watermark_engine.py`：水印合成和图像处理核心逻辑
- `template_manager.py`：模板和配置管理
- `requirements.txt`：Python 依赖包列表

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 更新日志

### v1.0.0
- 初始版本发布
- 支持文本和图片水印
- 实时预览和批量导出
- 模板管理功能
- macOS 原生应用支持